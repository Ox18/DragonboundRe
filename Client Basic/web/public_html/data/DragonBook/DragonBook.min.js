var $jscomp = {
    scope: {}
};
$jscomp.defineProperty = "function" == typeof Object.defineProperties ? Object.defineProperty : function (f, m, d) {
    if (d.get || d.set) throw new TypeError("ES3 does not support getters and setters.");
    f != Array.prototype && f != Object.prototype && (f[m] = d.value)
};
$jscomp.getGlobal = function (f) {
    return "undefined" != typeof window && window === f ? f : "undefined" != typeof global ? global : f
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.polyfill = function (f, m, d, g) {
    if (m) {
        d = $jscomp.global;
        f = f.split(".");
        for (g = 0; g < f.length - 1; g++) {
            var l = f[g];
            l in d || (d[l] = {});
            d = d[l]
        }
        f = f[f.length - 1];
        g = d[f];
        m = m(g);
        m != g && null != m && $jscomp.defineProperty(d, f, {
            configurable: !0,
            writable: !0,
            value: m
        })
    }
};
$jscomp.polyfill("Array.prototype.fill", function (f) {
    return f ? f : function (f, d, g) {
        var l = this.length || 0;
        0 > d && (d = Math.max(0, l + d));
        if (null == g || g > l) g = l;
        g = Number(g);
        0 > g && (g = Math.max(0, l + g));
        for (d = Number(d || 0); d < g; d++) this[d] = f;
        return this
    }
}, "es6-impl", "es3");
(function () {
    function f(a, b) {
        var e = "" + b,
            c = a.lastIndexOf(e);
        return 0 <= c && c === a.length - e.length
    }

    function m(a, b) {
        a = l(a, "<br>", "\n");
        var e = a.split(" "),
            c = e.length,
            h, q, k;
        for (k = 0; k < c; k++) q = e[k], -1 != q.indexOf(".") && -1 == q.indexOf("***") && (q = q.replace(A, function (a, c, e, k, q, f) {
            h = c && "www." != c ? "" : "http://";
            return b && c || x[f] || 0 == f.indexOf("www.") && x[f.slice(4)] ? '<a href="' + h + a + '" target="_blank">' + a + "</a>" : a
        }), e[k] = q);
        return l(e.join(" "), "\n", "<br>")
    }

    function d(a) {
        return '<img class="emo" src="/static/images/emo/' +
            a + '.png">'
    }

    function g(a) {
        if ("string" != typeof a) return "" + a;
        for (var b in y) - 1 != a.indexOf(b) && (a = l(a, b, d(y[b])));
        return a.replace(/&amp;#9760;/g, "&#9760;").replace(/([^pPsS]|^):\//g, function () {
            return d("undecided")
        }).replace(/\((rank|level)(\d\d?)\)/g, function (a, b, h) {
            return h <= B && Number(h) + "" == h ? '<span class="span_rank rank rank' + h + '"></span>' : a
        })
    }

    function l(a, b, e) {
        return a.split(b).join(e)
    }

    function v(a, b, e, c, h, q, k, n, f, d, g, t) {
        b = C(b);
        this.filename = a;
        this.graphics = b;
        this.frames = b.length;
        this.start_frame =
            void 0 == d ? 0 : d;
        this.loop_type = f;
        this.is_flip = n;
        this.frame_time = 1E3 / k;
        this.is_special = !1;
        this.start_time = w();
        e = Math.round(e);
        c = Math.round(c);
        k = 0;
        this.frames_x = [];
        for (n = 0; n < b.length; n++) this.frames_x.push(k), k += b[n][0] + 1;
        k = b[d][0];
        n = b[d][1];
        f = b[d][2];
        b = b[d][3];
        d = this.frames_x[d];
        f = this.is_flip ? f - k : -f; - 1 == a.indexOf(":") && (a = "/static/images/" + a);
        this.div = $("<div/>", {
            "class": "AniObject" + (this.is_flip ? " FlipH" : ""),
            style: "position: absolute; left:" + e + "px; top:" + c + "px; width: " + k + "px; height: " + n + "px; margin-left: " +
                f + "px; margin-top: " + -b + "px; opacity: " + q + "; background-image: url(" + a + "); background-repeat: no-repeat;background-color: transparent; zoom:1; background-position: -" + d + "px 0; z-index:" + g + ";"
        }).appendTo(h);
        if (t && 3 != this.loop_type) {
            var u = this;
            this.interval = setInterval(function () {
                var a = Math.floor((w() - u.start_time) / u.frame_time);
                u.set_frame(a)
            }, u.frame_time)
        }
    }

    function C(a) {
        for (var b = [], e, c = 0; c < a.length; c++) {
            var h = a[c];
            if ("number" == typeof h)
                for (; 0 < h;) b.push(e), h--;
            else b.push(e = h)
        }
        return b
    }

    function D(a,
        b) {
        if ("m" == a) return "/static/images/fb_boy.gif";
        if ("f" == a) return "/static/images/fb_girl.gif";
        if ("" == a) return b == GENDER_FEMALE ? "/static/images/fb_girl.gif" : "/static/images/fb_boy.gif";
        if (a == Number(a)) return "//graph.facebook.com/v2.2/" + a + "/picture?type=large";
        var e = a;
        e && 0 == e.indexOf("http://i.imgur.com/") && (e = e.slice(5));
        return e
    }
    window.DEBUG = "t.dragonbound.net" == location.hostname;
    var w = Date.now,
        E = Math.min,
        F = Math.round,
        G = Math.floor,
        z = Math.ceil;
    window.localStorage || (window.localStorage = {});
    Object.freeze ||
        (Object.freeze = function (a) {
            return a
        });
    "function" !== typeof Object.create && (Object.create = function (a) {
        function b() {}
        b.prototype = a;
        return new b
    });
    window.console || (console = {
        log: function () {},
        info: function () {},
        warn: function () {},
        error: function () {}
    });
    console.log.bind(console);
    console.info.bind(console);
    var r = console.warn.bind(console),
        H = console.error.bind(console);
    console.clear = void 0;
    try {
        Object.freeze(console)
    } catch (a) {}
    $(document).ajaxSend(function (a, b, e) {
        function c(a) {
            var b = null;
            if (document.cookie && "" != document.cookie)
                for (var c = document.cookie.split(";"), e = 0; e < c.length; e++) {
                    var h = jQuery.trim(c[e]);
                    if (h.substring(0, a.length + 1) == a + "=") {
                        b = decodeURIComponent(h.substring(a.length + 1));
                        break;
                    }
                }
            return b;
        }

        function h(a) {
            var b = "//" + document.location.host,
                c = document.location.protocol + b;
            return a == c || a.slice(0, c.length + 1) == c + "/" || a == b || a.slice(0, b.length + 1) == b + "/" || !/^(\/\/|http:|https:).*/.test(a)
        }!/^(GET|HEAD|OPTIONS|TRACE)$/.test(e.type) && h(e.url) && b.setRequestHeader("X-CSRFToken", c("csrftoken"))
    });
    var x = function (a) {
            var b,
                e = a.length,
                c = {};
            for (b = 0; b < e; b++) c[a[b]] = 1;
            return c
        }("facebook.com fb.com youtube.com prntscr.com i.imgur.com sbsfortress.com fbcdn-sphotos-f-a.akamaihd.net imgur.com m.facebook.com m.youtube.com youtu.be challonge.com twitter.com plus.google.com twitch.tv dragon.world ya.mba".split(" ")),
        A = /^(((https?|ftp):\/\/)|(www.))?([a-z0-9\.-]+\.[a-z]{2,11})(:\d+)?(\/[\/a-z0-9\.\-\?&_=;#%\*~]*)*$/gim,
        y = {
            "(penguin)": "penguin",
            "(poo)": "poo",
            ":poop:": "poo",
            "(alien)": "alien",
            "(balloon)": "balloon",
            "(crown)": "crown",
            "(ghost)": "ghost",
            "(gift)": "gift",
            "(music)": "music",
            "(party)": "party",
            "(pumpkin)": "pumpkin",
            "(queen)": "queen",
            "(ring)": "ring",
            "(santa)": "santa",
            "(trophy)": "trophy",
            "(xmastree)": "xmastree",
            "(pollo)": "pollo",
            "(chicken)": "pollo",
            "(pollito)": "pollito",
            "(chick)": "pollito",
            "(bunny)": "bunny",
            "(conejo)": "bunny",
            "(egg)": "egg",
            "(huevo)": "egg",
            "O:)": "angel",
            ":)": "smile",
            "(:": "smile",
            "):": "sad",
            ":(": "sad",
            ":D": "laugh",
            ":P": "lick",
            ":p": "lick",
            ":B": "blush",
            "B)": "cool",
            "B|": "cool",
            ":X": "sealed",
            ":x": "sealed",
            ":v": "pacman",
            ":V": "pacman",
            ":$": "money",
            ":*": "kiss",
            "*:": "kiss",
            "(heart)": "heart",
            "&lt;3": "heart",
            "&lt;/3": "broken_heart",
            ":O": "surprised",
            ":o": "surprised",
            ";)": "wink"
        },
        B = 31;
    v.prototype.set_frame = function (a, b) {
        if (!(1 >= this.frames)) {
            var e = this.div,
                c;
            if (0 == this.loop_type) {
                if (a >= this.frames) {
                    this.remove();
                    return
                }
            } else if (1 == this.loop_type) a %= this.frames;
            else if (2 == this.loop_type) c = 2 * this.frames - 2, a %= c, a >= this.frames && (a = c - a);
            else if (4 ==
                this.loop_type) {
                if (void 0 == b) {
                    c = Math.floor(a / (this.frames - 2));
                    if (void 0 == this.turn_cycle || c > this.turn_cycle) this.turn_cycle = Math.floor(Math.random() * (c + 6 - c + 1) + c);
                    this.is_special = c == this.turn_cycle
                } else this.is_special = b;
                var h = this.frames / 2;
                c = 2 * h - 2;
                this.is_special ? (a %= c, a >= h && (a = c - a)) : (a %= c, a >= h && (a = c - a), a += h)
            } else if (5 == this.loop_type) {
                if (void 0 == b) {
                    c = Math.floor(a / (this.frames - 2));
                    if (void 0 == this.turn_cycle || c > this.turn_cycle) this.turn_cycle = Math.floor(Math.random() * (c + 6 - c + 1) + c);
                    this.is_special = c ==
                        this.turn_cycle
                } else this.is_special = b;
                h = this.frames / 2;
                a = this.is_special ? a % h : a % h + h
            }
            if (!this.graphics[a]) return r("FrameNotExist", this.filename, this.loop_type, a, this.graphics);
            c = this.graphics[a][0];
            h = this.graphics[a][2];
            e.css({
                "background-position": -this.frames_x[a] + "px 0",
                width: c,
                height: this.graphics[a][1],
                "margin-left": this.is_flip ? h - c : -h,
                "margin-top": -this.graphics[a][3]
            })
        }
    };
    v.prototype.remove = function () {
        this.interval && (this.interval = clearInterval(this.interval));
        this.div.remove()
    };
    v.prototype.change_pos =
        function (a, b) {
            this.div.css({
                left: a,
                top: b
            })
        };
    var I = /[\x00-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;
    window.Img2Div2 = function (a, b, e) {
        a.html("");
        var c = a.width(),
            h = a.height();
        b = D(b);
        if (0 == b.indexOf("/static/")) d = $("<div>").css({
            width: c,
            height: h,
            "background-image": "url(" + b + ")",
            "background-size": "cover",
            "background-position": "center center",
            "background-repeat": "no-repeat"
        }), a.append(d);
        else if (f(b, ".gif")) try {
            var d = $("<div>").css({
                    width: c,
                    height: h,
                    "background-image": "url(/static/images/loader200.gif)",
                    "background-size": "cover",
                    "background-position": "center center",
                    "background-repeat": "no-repeat",
                    color: "black"
                }),
                k = new XMLHttpRequest;
            k.open("GET", b);
            k.responseType = "arraybuffer";
            k.addEventListener("load", function (a) {
                200 == k.status ? (a = new Blob([k.response], {
                    type: "image/gif"
                }), a = (window.URL || window.webkitURL).createObjectURL(a), d.css({
                    "background-image": "url(" + a + ")"
                }), d.html("")) : (r("Error 4 loading image", b, "Status:", k.status), d.css({
                    "background-image": "none",
                    background: "#aaa"
                }), d.html(k.status))
            });
            k.addEventListener("progress", function (a) {
                a.lengthComputable && d.html(F(100 * a.loaded / a.total) + "%")
            }, !1);
            k.addEventListener("error",
                function (a) {
                    r("Error 2 loading image", b, "Error:", a);
                    d.css({
                        "background-image": "none",
                        background: "#aaa"
                    })
                }, !1);
            k.addEventListener("abort", function (a) {
                r("Error 3 loading image", b, "Error:", a);
                d.css({
                    "background-image": "none",
                    background: "#aaa"
                })
            }, !1);
            k.send();
            a.append(d)
        } catch (t) {
            H("Img2Div2 ERROR:", b, t, JSON.stringify(t))
        } else {
            var n = $("<div>").css({
                width: c,
                height: h,
                "background-image": "url(/static/images/loader200.gif)",
                "background-size": "cover",
                "background-position": "center center",
                "background-repeat": "no-repeat"
            });
            a.append(n);
            var g = 2 * c,
                l = 2 * h,
                p = document.createElement("canvas");
            p.width = g;
            p.height = l;
            $(p).css({
                scaleX: .5,
                scaleY: .5,
                "transform-origin": "0 0"
            });
            var d = new Image;
            d.onload = function () {
                var a = d.width,
                    b = d.height,
                    c = E(a / g, b / l),
                    a = a / c,
                    b = b / c;
                p.getContext("2d").drawImage(d, z((g - a) / 2), z((l - b) / 2), a, b);
                n.replaceWith(p)
            };
            d.onerror = function (a) {
                r("Error 1 loading image", b, "Error:", a);
                a = p.getContext("2d");
                a.rect(0, 0, g, l);
                a.fillStyle = "#aaa";
                a.fill();
                n.replaceWith(p)
            };
            d.src = b
        }
        e ? a.addClass("glow_button_anim").unbind().click(function () {
                OpenInNewTab(e)
            }) :
            a.removeClass("glow_button_anim").unbind();
        return a
    };
    window.PlayerAnim = function (a, b) {
        for (var e = [], c = 0; c < b.length; c++) {
            var d = 0,
                f = -19,
                k, g, l = b[c];
            switch (l.type) {
                case "f":
                    g = 2;
                    k = 3;
                    break;
                case "h":
                    g = 4;
                    k = 5;
                    break;
                case "b":
                    g = 2;
                    k = 4;
                    break;
                case "g":
                    k = 6;
                    g = l.graphics.length;
                    g = 22 == g ? 4 : 44 == g ? 5 : 2;
                    break;
                case "1":
                    d = -100;
                    f = -69;
                    g = k = 1;
                    break;
                case "2":
                    d = -100, f = -69, k = 7, g = 1
            }
            void 0 != k && e.push({
                avatar: l,
                anim: new v("ava/" + l.file, l.graphics, d, f, a, 1, 10, !1, g, 0, k, !1)
            })
        }
        var m = w(),
            p;
        setInterval(function () {
            for (var a = G((w() - m) / 100), b =
                    0; b < e.length; b++) {
                var c = e[b].anim,
                    d = e[b].avatar.type;
                "h" == d && (p = c);
                "1" == d || "2" == d ? 0 == a % 2 && c.set_frame(a / 2) : "g" == d ? c.set_frame(a, p ? p.is_special : !1) : c.set_frame(a)
            }
        }, 100)
    };
    window.TD = function (a) {
        a = new Date(1E3 * a);
        var b, d = a.getTimezoneOffset() / -60; - 13 < localStorage.myTZ && 13 > localStorage.myTZ && (d = Number(localStorage.myTZ));
        b = 0 > d ? "GMT" + d : 0 < d ? "GMT+" + d : "UTC";
        a = new Date(a.getTime() + 36E5 * d);
        document.write(a.toISOString().replace("T", " ").replace(".000", "").replace("Z", "") + " (" + b + ")")
    };
    window.DragonParse = function () {
        for (var a =
                $(".DragonParse"), b = 0; b < a.length; b++) {
            var d = a.eq(b),
                c = d.html(),
                c = m(g(c));
            d.html(c).removeClass("DragonParse")
        }
    };
    window.ReplaceNonPrintableUnicodeChars = function (a, b) {
        return a.replace(I, b)
    }
})();